<div class="row wrapper border-bottom white-bg page-heading">
  <div class="col-lg-10">
    <h2>รายการขายรถ</h2>
    <ol class="breadcrumb">
      <li>
        <a href="/">หน้าแรก</a>
      </li>
      <li>
        <a>งานขายรถ</a>
      </li>
    </ol>
  </div>
  <div class="col-lg-2 text-right pull-right">

  </div>
</div>

<div class="wrapper wrapper-content animated fadeInRight">
  <div class="ibox">
    <div class="ibox-title">
      <h3>ค้นหาข้อมูลการขาย</h3>
    </div>
    <div class="ibox-content">

      <form action="" [formGroup]="formSearch">
        <div class="row form-group">
          <div class="col-xs-6 col-lg-6">
            <label class="col-lg-4 control-label">เลขที่ใบขาย</label>
            <div class="col-lg-8">
              <input type="text" class="form-control" formControlName="sellNo">

            </div>
          </div>
          <div class="col-xs-6 col-lg-6">
            <label class="col-lg-4 control-label">วันที่ขาย</label>
            <div class="col-lg-8">
              <thai-mat-datepicker id="dp" formControlName="sellDate"></thai-mat-datepicker>
            </div>
          </div>
        </div>
        <div class="row form-group">
          <div class="col-xs-6 col-lg-6">
            <label class="col-lg-4 control-label">ชื่อผู้ซื้อ</label>
            <div class="col-lg-8">
              <input type="text" class="form-control" formControlName="hireName">
            </div>
          </div>
          <div class="col-xs-6 col-lg-6">
            <label class="col-lg-4 control-label">เลขบัตรประชาชน</label>
            <div class="col-lg-8">
              <input type="text" class="form-control" formControlName="hireIdCard">
            </div>
          </div>
        </div>
        <div class="row form-group">
          <div class="col-xs-6 col-lg-6">
            <label class="col-lg-4 control-label">เลขเครื่อง</label>
            <div class="col-lg-8">
              <input type="text" class="form-control" formControlName="eNo">
            </div>
          </div>
          <div class="col-xs-6 col-lg-6">
            <label class="col-lg-4 control-label">เลขโครง</label>
            <div class="col-lg-8">
              <input type="text" class="form-control" formControlName="fNo">
            </div>
          </div>
        </div>
        <div class="row form-group">
          <div class="col-xs-6 col-lg-6">
            <label class="col-lg-4 control-label">ประเภทการขาย</label>
            <div class="col-lg-8">
              <ng-select formControlName="bookingPaymentType" [items]="BookingPaymentTypeList" bindLabel="name"
                bindValue="id">
              </ng-select>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-12 text-right">
            <button type="button" class="btn btn-info" (click)="onSearch()">
              <i class="fa fa-search" aria-hidden="true"></i>
              ค้นหา
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>


  <div class="ibox">
    <div class="ibox-content">
      <table class="table table-hover nowrap set-dataTable" cellspacing="0">
        <thead>
          <tr>
            <th>ประเภทการซื้อ</th>
            <th>เลขที่ใบขาย</th>
            <th>สถานะ</th>
            <th>รายละเอียด</th>
            <th>การชำระเงิน</th>
            <th>วันที่ทำการขาย</th>
            <th>ผู้จดทะเบียน</th>
            <th>ผู้ซื้อ</th>
            <th>เลขบัตร ปชช. ผู้ซื้อ</th>
            <th>ข้อมูลรถ</th>
            <th>เลขเครื่อง</th>
            <th>เลขโครง</th>
            <th>มูลค่าสินค้า</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of contractListModel">
            <td class="text-center" [ngSwitch]="item.bookingPaymentType">
              <div *ngSwitchCase="BookingPaymentType.Cash"
                style="margin:auto; padding:5px; color:#fff; background:#32CD32;">
                เงินสด</div>
              <div *ngSwitchCase="BookingPaymentType.Leasing"
                style="margin:auto; padding:5px; color:#fff; background:#FF1493;">
                ไฟแนนซ์</div>
              <div *ngSwitchCase="BookingPaymentType.HierPurchase"
                style="margin:auto; padding:5px; color:#fff; background:#1E90FF;">
                เช่าซื้อ</div>
              <div *ngSwitchCase="BookingPaymentType.Credit"
                style="margin:auto; padding:5px; color:#fff; background:#6A5ACD;">
                ขายเชื่อ</div>
            </td>
            <td>{{item.sellNo}}</td>
            <td
              [ngClass]="{'text-navy': item.contractStatus == 32, 'text-warning': item.contractStatus == 31, 'text-success': item.contractStatus == 30 }">
              {{item.statusDesc}}</td>
            <td>
              <a class="btn btn-info btn-xs" (click)="gotoDetail(item.contractId, item.bookingId, item.saleId)">
                <i class="fa fa-info-circle" aria-hidden="true"></i>
                รายละเอียด
              </a>
            </td>
            <td [ngSwitch]="true">
              <a *ngSwitchCase="item.contractStatus == 29 || item.contractStatus == 30"
                (click)="gotoPayment(item.contractId)" class="btn btn-info btn-outline btn-xs">
                <i class="fa fa-history"></i>
                ประวัติการชำระ
              </a>
              <a *ngSwitchCase="item.contractStatus == 31" (click)="gotoPayment(item.contractId)"
                class="btn btn-primary btn-outline btn-xs">
                <i class="fa fa-money"></i>
                ชำระเงิน
              </a>
            </td>
            <td>{{setLocalDate(item.saleDate)}}</td>
            <td><small class="text-muted">{{item.contractOwner}}</small><br>{{item.ownerFullName}}</td>
            <td><small class="text-muted">{{item.contractHire}}</small><br>{{item.hireFullName}}</td>
            <td>{{item.hireIdCard}}</td>
            <td><small class="text-muted">{{item.brand}}</small><br>รุ่น: {{item.model}}, สี: {{item.color}}</td>
            <td>{{item.engineNo}}</td>
            <td>{{item.frameNo}}</td>
            <td class="text-right">{{item.netPrice | number:'1.2-2':'en-US'}}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>